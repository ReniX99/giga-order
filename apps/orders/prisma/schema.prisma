generator client {
  provider = "prisma-client"
  output   = "../src/modules/prisma/generated"
}

datasource db {
  provider = "postgresql"
}

model Product {
  id Int @id @default(autoincrement())

  name String @unique

  description String

  price Float 

  orders OrderProduct[]

  createdAt DateTime @default(now()) @map("created_at")

  updatedAt DateTime @updatedAt() @map("updated_at")

  @@map("products")
}

model Status {
  id Int @id @default(autoincrement())

  name String @unique

  orders Order[]

  @@map("statuses")
}

model Order {
  id String @default(uuid()) @unique

  userId String @map("user_id")

  products OrderProduct[]

  statusId Int

  status Status @relation(fields: [statusId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now()) @map("created_at")

  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("orders")
}

model OrderProduct {
  orderId String @map("order_id")

  order Order @relation(fields: [orderId], references: [id], onDelete: Cascade)

  productId Int @map("product_id")

  product Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  count Int

  createdAt DateTime @default(now()) @map("created_at")

  updatedAt DateTime @updatedAt @map("updated_at")


  @@id([orderId, productId])
  @@map("orders_products")
}